pipeline{
    agent {
        label 'test'
    }

    environment{
        toolbelt = tool 'sfdx_toolbelt'
    }

    stages{
        stage('test') {
            steps{
            echo ' test stage ran'
            echo 'new line'
            echo ' success '

            dir('subDir') {
                checkout scm
            }

            script {
                //sfdx sfpowerkit:project:diff -d deltaTest2 -x -r DX-sitD -t feature/new-silhouette-images
                SFDX = command "${toolbelt}/sfdx force:org:list"
                echo "command: ${SFDX}"
                SFDX_2 = command "${toolbelt}/sfdx force:org:list"
                echo "2nd: ${SFDX_2}"

                command "${toolbelt}/sfdx sfpowerkit:project:diff -d deltaTest2 -x -r master -t test-plugin"
                echo "project creation:: ${CREATE_PROJECT}"
            }

            }
        }

         stage('deployment'){
            steps{
                echo 'Deployment Stage'
            }
        }
    }
}
