pipeline {

    agent {
        label 'test'
    }

    environment {
        toolbelt = tool name: 'sfdx_toolbelt', type: 'com.cloudbees.jenkins.plugins.customtools.CustomTool'
    }

    stages {
        stage('test') {

          steps {
            echo ' test stage ran'
            echo 'new line'
            echo ' success '

            dir(path: 'repo') {
              checkout scm
              sh "${toolbelt}/sfdx sfpowerkit:project:diff -d deltaTest2 -x -r master -t test-delta"

            }
          }
        }

        stage('deployment') {
            steps {
                echo 'Deployment Stage'
            }
        }

    }

}
